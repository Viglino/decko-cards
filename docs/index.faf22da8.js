!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function t(e){return e&&e.__esModule?e.default:e}class o{constructor(e){this.defaultLanguage=e||"en",this.setLanguage(this.defaultLanguage)}}o.prototype.setLanguage=function(e){e&&(this.language=e,this[e]||(this[e]={}))},o.prototype.set=function(e,t){this[e]||(this[e]={});for(let o in t)this[e][o]=t[o]},o.prototype.template=function(e){e&&e.getAttribute&&(e.dataset.i18n?e.innerHTML=i(e.dataset.i18n):Array.prototype.forEach.call(e.querySelectorAll("[data-i18n]"),(e=>{e.innerHTML=i(e.dataset.i18n)})))};const a=new o;function i(e,t){return a[a.language][e]||a[a.defaultLanguage][e]||(t?"":e)}var r=i;a.set("en",{title:"Title",name:"name",color:"color",borderColor:"color",rotate:"rotate",scale:"scale",img_top:"position V",img_left:"position H",img_width:"size",img_height:"size",backgroundColor:"back color",backgroundSize:"size",backgroundPositionX:"position H",backgroundPositionY:"position V",front:"front",back:"back",duplicate:"duplicate",delete:"delete",loadfile:"Load a card file (.card)",ok:"OK",cancel:"Cancel"}),a.set("fr",{title:"Titre",name:"nom",color:"couleur",borderColor:"couleur",rotate:"tourner",scale:"taille",img_top:"position V",img_left:"position H",img_width:"taille",img_height:"taille",backgroundColor:"couleur de fond",backgroundSize:"taille",backgroundPositionX:"position H",backgroundPositionY:"position V",front:"face",back:"dos",duplicate:"dupliquer",delete:"supprimer",loadfile:"Charger un fichier (.card)",ok:"OK",cancel:"Annuler"}),a.setLanguage(navigator.language.split("-")[0]||"en");var s,l={};s=function(){"use strict";function t(e,t,o){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){s(a.response,t,o)},a.onerror=function(){console.error("could not download file")},a.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(o){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof e&&e.global===e?e:void 0,r=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(e,r,s){var l=i.URL||i.webkitURL,n=document.createElement("a");r=r||e.name||"download",n.download=r,n.rel="noopener","string"==typeof e?(n.href=e,n.origin===location.origin?a(n):o(n.href)?t(e,r,s):a(n,n.target="_blank")):(n.href=l.createObjectURL(e),setTimeout((function(){l.revokeObjectURL(n.href)}),4e4),setTimeout((function(){a(n)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,i,r){if(i=i||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,r),i);else if(o(e))t(e,i,r);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){a(s)}))}}:function(e,o,a,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return t(e,o,a);var l="application/octet-stream"===e.type,n=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||l&&n||r)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=e:location=e,s=null},d.readAsDataURL(e)}else{var m=i.URL||i.webkitURL,p=m.createObjectURL(e);s?s.location=p:location.href=p,s=null,setTimeout((function(){m.revokeObjectURL(p)}),4e4)}});i.saveAs=s.saveAs=s,l=s},"function"==typeof define&&define.amd?define([],s):s();const n={create:function(e,t){var o;if(t=t||{},"TEXT"===e)o=document.createTextNode(t.html||""),t.parent&&t.parent.appendChild(o);else for(var a in o=document.createElement(e),/button/i.test(e)&&o.setAttribute("type","button"),t)switch(a){case"className":t.className&&t.className.trim&&o.setAttribute("class",t.className.trim());break;case"text":o.innerText=t.text;break;case"html":t.html instanceof Element?o.appendChild(t.html):void 0!==t.html&&(o.innerHTML=t.html);break;case"parent":t.parent&&t.parent.appendChild(o);break;case"options":if(/select/i.test(e))for(var i in t.options)n.create("OPTION",{html:i,value:t.options[i],parent:o});break;case"style":n.setStyle(o,t.style);break;case"change":case"click":n.addListener(o,a,t[a]);break;case"on":for(var r in t.on)n.addListener(o,r,t.on[r]);break;case"checked":o.checked=!!t.checked;break;default:o.setAttribute(a,t[a])}return o},setHTML:function(e,t){t instanceof Element?e.appendChild(t):void 0!==t&&(e.innerHTML=t)},appendText:function(e,t){e.appendChild(document.createTextNode(t||""))},addListener:function(e,t,o,a){"string"==typeof t&&(t=t.split(" ")),t.forEach((function(t){e.addEventListener(t,o,a)}))},removeListener:function(e,t,o){"string"==typeof t&&(t=t.split(" ")),t.forEach((function(t){e.removeEventListener(t,o)}))},show:function(e){e.style.display=""},hide:function(e){e.style.display="none"},hidden:function(e){return"none"===e.getStyle(e,"display")},toggle:function(e){e.style.display="none"===e.style.display?"":"none"},setStyle:function(e,t){for(var o in t)switch(o){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":"number"==typeof t[o]?e.style[o]=t[o]+"px":e.style[o]=t[o];break;default:e.style[o]=t[o]}},getStyle:function(e,t){var o,a=(e.ownerDocument||document).defaultView;if(a&&a.getComputedStyle)t=t.replace(/([A-Z])/g,"-$1").toLowerCase(),o=a.getComputedStyle(e,null).getPropertyValue(t);else if(e.currentStyle&&(t=t.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()})),o=e.currentStyle[t],/^\d+(em|pt|%|ex)?$/i.test(o)))return function(t){var o=e.style.left,a=e.runtimeStyle.left;return e.runtimeStyle.left=e.currentStyle.left,e.style.left=t||0,t=e.style.pixelLeft+"px",e.style.left=o,e.runtimeStyle.left=a,t}(o);return/px$/.test(o)?parseInt(o):o},outerHeight:function(e){return e.offsetHeight+n.getStyle(e,"marginBottom")},outerWidth:function(e){return e.offsetWidth+n.getStyle(e,"marginLeft")},offsetRect:function(e){var t=e.getBoundingClientRect();return{top:t.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:t.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:t.height||t.bottom-t.top,width:t.width||t.right-t.left}},getFixedOffset:function(e){var t={left:0,top:0},o=function(e){if(!e)return t;if("absolute"===n.getStyle(e,"position")&&"none"!==n.getStyle(e,"transform")){var a=e.getBoundingClientRect();return t.left+=a.left,t.top+=a.top,t}return o(e.offsetParent)};return o(e.offsetParent)},positionRect:function(e,t){var o=0,a=0,i=function(r){if(r)return o+=r.offsetLeft,a+=r.offsetTop,i(r.offsetParent);var s={top:e.offsetTop+a,left:e.offsetLeft+o};return t&&(s.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,s.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),s.bottom=s.top+e.offsetHeight,s.right=s.top+e.offsetWidth,s};return i(e.offsetParent)},scrollDiv:function(e,t){var o,a,i,r,s,l=!1,c=0,d=0,m="function"==typeof(t=t||{}).onmove?t.onmove:function(){},p=t.vertical?"screenY":"screenX",u=t.vertical?"scrollTop":"scrollLeft",h=!1,g=0,f=function(){s&&(g++,setTimeout(y))},y=function(){if(s){if(--g)return;var t=e.clientHeight,o=e.scrollHeight;a=t/o,s.style.height=100*a+"%",s.style.top=e.scrollTop/o*100+"%",r.style.height=t+"px",t>o-.5?r.classList.add("ol-100pc"):r.classList.remove("ol-100pc")}},b=function(t){t.target.classList.contains("ol-noscroll")||(h=!1,l=t[p],d=new Date,e.classList.add("ol-move"),t.preventDefault(),window.addEventListener("pointermove",v),n.addListener(window,["pointerup","pointercancel"],C))},v=function(t){if(!1!==l){var r=(i?-1/a:1)*(l-t[p]);h=h||Math.round(r),e[u]+=r,(o=new Date)-d&&(c=(c+r/(o-d))/2),l=t[p],d=o,r&&m(!0)}else h=!0},k=function(t){var o=t>0?Math.min(100,t/2):Math.max(-100,t/2);t-=o,e[u]+=o,-1<t&&t<1?(h?setTimeout((function(){e.classList.remove("ol-move")})):e.classList.remove("ol-move"),h=!1,m(!1)):setTimeout((function(){k(t)}),40)};if(t.vertical&&t.minibar){var w=function(o){e.removeEventListener("pointermove",w),e.parentNode.classList.add("ol-miniscroll"),s=n.create("DIV"),r=n.create("DIV",{className:"ol-scroll",html:s}),e.parentNode.insertBefore(r,e),s.addEventListener("pointerdown",(function(e){i=!0,b(e)})),t.mousewheel&&(n.addListener(r,["mousewheel","DOMMouseScroll","onmousewheel"],(function(e){V(e)})),n.addListener(s,["mousewheel","DOMMouseScroll","onmousewheel"],(function(e){V(e)}))),e.parentNode.addEventListener("pointerenter",f),window.addEventListener("resize",f),!1!==o&&f()};e.parentNode?w(!1):e.addEventListener("pointermove",w),e.addEventListener("scroll",(function(){f()}))}e.style["touch-action"]="none",e.style.overflow="hidden",e.classList.add("ol-scrolldiv"),n.addListener(e,["pointerdown"],(function(e){i=!1,b(e)})),e.addEventListener("click",(function(t){e.classList.contains("ol-move")&&(t.preventDefault(),t.stopPropagation())}),!0);var C=function(o){(d=new Date-d)>100||i?c=0:d>0&&(c=((c||0)+(l-o[p])/d)/2),k(!1===t.animate?0:200*c),l=!1,c=0,d=0,e.classList.contains("ol-move")?e.classList.remove("ol-hasClick"):(e.classList.add("ol-hasClick"),setTimeout((function(){e.classList.remove("ol-hasClick")}),500)),i=!1,window.removeEventListener("pointermove",v),n.removeListener(window,["pointerup","pointercancel"],C)},V=function(t){var o=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));return e.classList.add("ol-move"),e[u]-=30*o,e.classList.remove("ol-move"),!1};return t.mousewheel&&n.addListener(e,["mousewheel","DOMMouseScroll","onmousewheel"],V),{refresh:f}},dispatchEvent:function(e,t){var o;try{o=new CustomEvent(e)}catch(t){(o=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,{})}t.dispatchEvent(o)}};var c=n;const d=new class{constructor(e){this.element={},this.element.back=c.create("DIV",{"data-role":"dialog",parent:document.body}),this.element.form=c.create("FORM",{on:{submit:e=>{e.preventDefault()}},parent:this.element.back}),this.element.title=c.create("H2",{html:"title",parent:this.element.form}),c.create("DIV",{className:"closebox",html:"&times;",click:()=>{this.close()},parent:this.element.form}),this.element.content=c.create("DIV",{className:"content",parent:this.element.form}),this.element.buttons=c.create("DIV",{className:"buttons",parent:this.element.form}),this.close(),document.body.addEventListener("keydown",(e=>{"Escape"===e.key&&this.close()}))}close(){this.element.back.dataset.hidden=""}show(e){this.element.title.innerHTML=e.title,this.element.back.className=e.className||"",this.element.content.innerHTML="",e.html instanceof Node?this.element.content.appendChild(e.html):this.element.content=e.html,this.element.buttons.innerHTML="",Object.keys(e.buttons).forEach((t=>{c.create("BUTTON",{html:e.buttons[t],click:()=>{e.callback&&e.callback(t),this.close()},parent:this.element.buttons})})),delete this.element.back.dataset.hidden}replay(){setTimeout((()=>{delete this.element.back.dataset.hidden}))}};var m=d,p=[{file:"star.svg",author:"Viglino",keywords:["star","emoji","symbol"],url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"star",path:"./img/symbol/"},{file:"earth-eye.svg",author:"Viglino",keywords:["earth","eye","symbol"],url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"earth-eye",path:"./img/symbol/"},{file:"joker.svg",author:"Viglino",keywords:["joker","people"],url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"joker",path:"./img/people/"},{file:"joker-2.svg",author:"Viglino",keywords:["joker","people"],url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"joker-2",path:"./img/people/"},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"yum",file:"yum.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"yawn",file:"yawn.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"woozy",file:"woozy.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"vampire",file:"vampire.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"tounge",file:"tounge.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"tooth",file:"tooth.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"surprise",file:"surprise.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"steam",file:"steam.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"sneez",file:"sneez.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"smirk",file:"smirk.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"smile",file:"smile.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"sad",file:"sad.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"rabbit",file:"rabbit.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"nauseated",file:"nauseated.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"mustache",file:"mustache.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"laughing",file:"laughing.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"kiss",file:"kiss.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"grin",file:"grin.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"grimacing",file:"grimacing.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"flushed",file:"flushed.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"exhausted",file:"exhausted.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"downcast",file:"downcast.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"dali",file:"dali.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"confused",file:"confused.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"confounded",file:"confounded.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"confined",file:"confined.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"blush",file:"blush.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"astonish",file:"astonish.svg",path:"./img/emoticard/mouth/",keywords:["emoticard","mouth"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"wiking",file:"wiking.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"tired",file:"tired.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"sweat",file:"sweat.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"surprise",file:"surprise.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"sunglasses",file:"sunglasses.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"sleeping",file:"sleeping.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"silly",file:"silly.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"sad",file:"sad.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"rolling",file:"rolling.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"pleading",file:"pleading.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"pale",file:"pale.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"monocle",file:"monocle.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"mask",file:"mask.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"joy",file:"joy.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"grin",file:"grin.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"glasses",file:"glasses.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"flushed",file:"flushed.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"eye",file:"eye.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"down",file:"down.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"crying",file:"crying.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"blink",file:"blink.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"astonish",file:"astonish.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"angry",file:"angry.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]},{author:"Viglino",url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",title:"alien",file:"alien.svg",path:"./img/emoticard/eye/",keywords:["emoticard","eye"]}];var u=function(e,t){const o=c.create("DIV"),a=[];function i(e){e&&((e=e.split("/")).pop(),e=e.join("/"),l[e]&&(s.value=e)),e=s.value,a.forEach((t=>{e&&t.dataset.path!==e?t.className="hidden":t.className="visible"}))}const s=c.create("SELECT",{change:()=>i(),parent:o}),l={};p.forEach((e=>{const i=e.path.replace("./img/","").replace(/\/$/,"");l[i]=1,a.push(c.create("IMG",{src:e.path+e.file,"data-path":i,title:r(e.title),click:()=>{t(e.path+e.file),m.close()},parent:o}))})),c.create("OPTION",{value:"",text:r("all"),parent:s}),Object.keys(l).forEach((e=>{c.create("OPTION",{value:e,text:e,parent:s})})),console.l,i(e.replace("./img/","").replace(/\/$/,"")),m.show({title:r("images"),html:o,className:"img",buttons:{cancel:r("cancel")}})};const h={role:{html:t('<front> <div data-prop="title"></div> <div data-prop="line"></div> <div data-prop="icon" class="centerX centerY"></div> <div data-prop="background"></div> <div data-prop="image"></div> <div data-prop="foreground"></div> <div data-prop="name"></div> <div data-prop="info"></div> </front><back> <div data-prop="logo" class="centerX centerY"></div> <div data-prop="deck" class="centerX"></div> </back>'),properties:{name:"roleTemplate",description:"roleDesc",format:"small",properties:{title:{type:"text",default:"",style:{color:"#000000",backgroundColor:"#ffffff"}},line:{type:"lineh",collapse:!0,style:{color:"transparent"}},icon:{type:"image",default:"./img/none.svg",alt:["circle","box","image","hidden"],style:{img_width:90,borderColor:"transparent"}},image:{type:"image",default:"./img/none.svg",style:{img_width:50,img_top:50}},background:{type:"image",collapse:!0,style:{img_width:30,img_top:50,img_left:80}},foreground:{type:"image",collapse:!0,style:{img_width:30,img_top:50,img_left:20}},name:{type:"text",default:"name",style:{color:"#000000",backgroundColor:"#ffffff",transform:{init:"translateX(-50%)",scale:1,rotate:0}}},info:{type:"textarea",fontSize:4,default:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec at quam vel lorem suscipit sagittis non ac justo. Aenean volutpat purus vitae metus aliquam ultrices. Suspendisse rhoncus odio sit amet ex malesuada tincidunt."}},back:{logo:{type:"image",default:"./img/none.svg",alt:["box","circle","hidden"],style:{img_width:60}},deck:{type:"text",default:"name",style:{color:"#000000",backgroundColor:"transparent",transform:{init:"translateX(-50%)",scale:1,rotate:0}}}}}},emoticard:{html:t('<front> <div data-prop="background"></div> <div data-prop="mouth"></div> <div data-prop="eye"></div> <div data-prop="title"></div> </front><back> <div data-prop="logo" class="centerX centerY"></div> <div data-prop="deck" class="centerX"></div> </back>'),properties:{name:"roleTemplate",description:"roleDesc",className:"noBorder",format:"squares",style:{borderColor:"#ffc000"},properties:{eye:{type:"image",default:"./img/emoticard/eye/eye.svg"},mouth:{type:"image",default:"./img/emoticard/mouth/smile.svg"},title:{type:"text",default:"Emoticards",fontSize:10,style:{color:"#000000"}}},back:{logo:{type:"image",default:"./img/none.svg",alt:["box","circle","hidden"],style:{img_width:60}},deck:{type:"text",default:"name",style:{color:"#000000",backgroundColor:"transparent",transform:{init:"translateX(-50%)",scale:1,rotate:0}}}}}}};for(let e in h)h[e].properties.html=h[e].html,h[e]=h[e].properties;var g=h;function f(e){return e.replace(/\n/g,"<br/>")}function y(e,t){const o=[];Object.keys(t).forEach((e=>{switch(e){case"init":o.push(t[e]);break;case"rotate":case"skewX":case"skewY":o.push(e+"("+t[e]+"deg)");break;case"scale":o.push(e+"("+t[e]+")")}})),e.style.transform=o.join(" ")}class b{constructor(e){const t=g[(e=e||{}).template]?e.template:"role",o=g[t];this.element=c.create("CARD",{html:o.html,className:o.className||"",parent:e.parent}),this.element.dataset.template=t,this.borderElt=c.create("DIV",{className:"border",parent:this.element.querySelector("front")}),this.backElt=c.create("DIV",{className:"border",parent:this.element.querySelector("back")}),this.format=o.format||"small",this.properties=JSON.parse(JSON.stringify(e.properties||o.properties)),this.back=JSON.parse(JSON.stringify(e.back||o.back)),this.style=JSON.parse(JSON.stringify(e.style||o.style||{})),this.render()}}b.prototype.export=function(){return JSON.stringify({className:this.element.className,format:this.format,template:this.element.dataset.template,properties:this.properties,back:this.back,style:this.style})},b.prototype.clone=function(){const e=new b({template:this.getTemplate(),properties:this.properties,back:this.back,style:this.style});return e.render(),e},b.prototype.getTemplate=function(){return this.element.dataset.template},b.prototype.copy=function(){const e=this.element.cloneNode();return e.innerHTML=this.element.innerHTML,e},b.prototype.render=function(){document.body.dataset.format=this.format||"small",this.element.dataset.format=this.format||"small",this.element.style.color=this.style.borderColor||"#fff",this.borderElt.style.color=this.style.borderColor||"#fff",this.backElt.style.backgroundColor=this.style.backColor||"#fff",this.backElt.style.color=this.style.hatchColor||"#fff",this.backElt.dataset.hatch=this.style.hach,this.renderProp(this.properties),this.renderProp(this.back)},b.prototype.renderProp=function(e){Object.keys(e).forEach((t=>{const o=this.element.querySelector('[data-prop="'+t+'"]');if(!o)return;const a=e[t];switch(a.hasOwnProperty("visibility")&&(!1===a.visibility?o.style.display="none":o.style.display=""),o.dataset.type=a.type,o.dataset.alt=a.altVal,a.type){case"text":case"textarea":{const e=void 0!==a.value?a.value:r(a.default)||"";o.innerHTML="";c.create("P",{style:{fontSize:a.fontSize+"em"},parent:o}).innerHTML=f(e);break}case"image":o.innerHTML="";c.create("IMG",{parent:o}).src=void 0!==a.value?a.value:a.default||"";break;case"lineh":break;default:console.warn("[BADTYPE] ",a.type)}a.style&&Object.keys(a.style).forEach((e=>{switch(e){case"transform":y(o,a.style[e]);break;case"img_top":case"img_left":case"img_width":o.querySelector("img").style[e.replace("img_","")]=a.style[e]+"%";break;default:o.style[e]=a.style[e]}}))}))},b.prototype.getForm=function(e){e.innerHTML="";const t=c.create("FRONT",{parent:e}),o=c.create("FIELDSET",{html:"<legend>Style</legend>",parent:t});c.create("LABEL",{html:r("borderColor"),parent:o}),c.create("INPUT",{type:"color",value:this.style.borderColor||"#ffffff",change:e=>{this.style.borderColor=e.target.value||"#ffffff",this.element.style.color=this.borderElt.style.color=this.style.borderColor||"#fff"},parent:o}),this.getFromProperties(this.properties,t);const a=c.create("BACK",{parent:e}),i=c.create("FIELDSET",{html:"<legend>Style</legend>",parent:a}),s=c.create("SELECT",{change:()=>{this.backElt.dataset.hatch=this.style.hach=s.value},parent:i});["solid","hatch","cross"].forEach((e=>{c.create("OPTION",{value:e,html:r(e),parent:s})})),c.create("INPUT",{type:"color",value:this.style.backColor||"#ffffff",change:e=>{this.style.hatchColor=e.target.value||"#ffffff",this.backElt.style.color=this.style.hatchColor||"#fff"},parent:i}),c.create("INPUT",{type:"color",value:this.style.backColor||"#ffffff",change:e=>{this.style.backColor=e.target.value||"#ffffff",this.backElt.style.backgroundColor=this.style.backColor||"#fff"},parent:i}),this.getFromProperties(this.back||{},a)},b.prototype.getFromProperties=function(e,t){Object.keys(e).forEach((o=>{const a=e[o],i=c.create("FIELDSET",{"data-type":a.type,parent:t});a.collapse?i.dataset.collapse="":delete i.dataset.collapse;c.create("LEGEND",{html:'<i class="expand"></i>'+r(o),parent:i}).querySelector("i").addEventListener("click",(()=>{a.collapse=!a.collapse,a.collapse?i.dataset.collapse="":delete i.dataset.collapse}));const s=this.element.querySelector('[data-prop="'+o+'"]');switch(a.type){case"text":case"textarea":c.create("textarea"===a.type?"TEXTAREA":"INPUT",{value:a.value||"",placeholder:r(o),type:"text",on:{keyup:e=>{a.value=e.target.value;const t=f(e.target.value);s.querySelector("p").innerHTML=t}},parent:i});break;case"image":{c.create("BUTTON",{className:"image",click:()=>{u(e.value,(t=>{e.value=t,e.dispatchEvent(new Event("change"))}))},parent:i});const e=c.create("INPUT",{type:"url",className:"image",placeholder:"http://",value:a.value||"",change:e=>{a.value=e.target.value,s.querySelector("IMG").src=a.value},parent:i});break}}if(a.alt){const e=c.create("SELECT",{className:"alt",change:()=>{a.altVal=s.dataset.alt=e.value},parent:i});a.alt.forEach((t=>{const o=c.create("OPTION",{value:t,html:t,parent:e});a.altVal===t&&(o.selected=!0)}))}const l=Object.keys(a.style||{});if(l.length){const e=c.create("FIELDSET",{html:"<legend>Style</legend>",parent:i});l.forEach((t=>{const o="transform"!==t?c.create("LABEL",{html:r(t),parent:e}):null;switch(t){case"color":case"borderColor":case"backgroundColor":c.create("INPUT",{type:"color",value:a.style[t],change:e=>{s.style[t]=a.style[t]=e.target.value},parent:o});break;case"img_top":case"img_left":case"img_width":c.create("INPUT",{type:"range",className:"size",min:/width/.test(t)?20:-200,max:/width/.test(t)?200:300,value:a.style[t],on:{input:e=>{a.style[t]=e.target.value,s.querySelector("img").style[t.replace("img_","")]=a.style[t]+"%"}},parent:o});break;case"transform":Object.keys(a.style.transform).forEach((t=>{const o=c.create("LABEL",{html:r(t),parent:e});switch(t){case"scale":{const e=c.create("INPUT",{type:"range",min:.5,max:3,step:.1,value:a.style.transform[t],on:{input:e=>{a.style.transform[t]=e.target.value,y(s,a.style.transform)}},parent:o});c.create("BUTTON",{html:"↻",className:"reset",click:()=>{e.value=1,e.dispatchEvent(new Event("input"))},parent:o});break}case"skewY":case"rotate":{const e=c.create("INPUT",{type:"range",className:"angle",min:-10,max:10,step:.1,value:-1*a.style.transform[t],on:{input:e=>{a.style.transform[t]=-1*e.target.value,y(s,a.style.transform)}},parent:o});c.create("BUTTON",{html:"↻",className:"reset",click:()=>{e.value=0,e.dispatchEvent(new Event("input"))},parent:o});break}default:o.style.display="none"}}))}}))}}))};var v=b;const k=document.getElementById("card"),w=document.getElementById("form"),C=document.getElementById("cards");class V{constructor(e,t){this.cards=[],this.current=void 0,this.template=e,C.innerHTML="",c.create("BUTTON",{html:"+",click:()=>{this.addCard()},parent:C}),this.cardList=c.create("UL",{parent:C}),t&&t.forEach((e=>this.addCard(new v(e))))}}V.prototype.removeCard=function(e){const t=this.cards.indexOf(e);this.cards.splice(t,1),e.li.remove(),this.selectCard(this.cards[t-1]||this.cards[t])},V.prototype.addCard=function(e){const t=this.cards;e=e?e.clone():new v({template:this.template});const o={li:c.create("LI",{html:e.copy(),"data-pos":this.cards.length,parent:this.cardList}),card:e};function a(e){let a=document.elementFromPoint(e.clientX,e.clientY);for(;(a=a.parentElement)&&"CARD"!==a.tagName;);if(a&&"LI"==a.parentElement.tagName){const e=a.parentElement;if(e!==o.li){const a=parseInt(o.li.dataset.pos),i=parseInt(e.dataset.pos);a!=i-1&&a!=i+1||(a==i-1?e.parentNode.insertBefore(e,o.li):e.parentNode.insertBefore(o.li,e),e.dataset.pos=a,o.li.dataset.pos=i,t[a]=t[i],t[i]=o)}}}function i(){document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",i)}this.cards.push(o),this.selectCard(o),o.li.addEventListener("pointerdown",(e=>{e.preventDefault(),this.selectCard(o),document.addEventListener("pointermove",a),document.addEventListener("pointerup",i)}))},V.prototype.selectCard=function(e){if(this.current&&(this.current.li.innerHTML="",this.current.li.appendChild(this.current.card.copy()),this.cards.forEach((e=>delete e.li.dataset.select))),k.innerHTML="",w.innerHTML="",this.current=e,!this.current)return;e.li.dataset.select="",k.appendChild(e.card.element);const t=c.create("BUTTON",{className:"fback",click:()=>{k.dataset.face=w.dataset.face="back"===k.dataset.face?"front":"back"},parent:k});c.create("SPAN",{html:r("front"),className:"front",parent:t}),c.create("SPAN",{html:r("back"),className:"back",parent:t}),c.create("BUTTON",{html:r("duplicate"),className:"duplicate",click:()=>{this.addCard(this.current.card)},parent:k}),c.create("BUTTON",{html:r("delete"),className:"delete",click:()=>{this.removeCard(this.current)},parent:k}),c.create("BUTTON",{html:r("save"),className:"save",click:()=>{this.save()},parent:k}),e.card.getForm(w)},V.prototype.save=function(){const e={template:this.template,cards:[]};this.cards.forEach((t=>e.cards.push(JSON.parse(t.card.export()))));var t=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});(0,l.saveAs)(t,"card.card")};var S=V;const L=c.create("DIV"),E=c.create("DIV",{className:"list",parent:L});Object.keys(g).forEach((e=>{const t=new v({template:e});E.appendChild(t.element),t.element.addEventListener("mouseleave",(()=>{T.innerText=""})),t.element.addEventListener("mouseenter",(()=>{T.innerText=e})),t.element.addEventListener("click",(()=>{m.close();new S(e).addCard()}))}));const T=c.create("DIV",{className:"info",parent:L}),A=c.create("DIV",{className:"file",parent:L}),N=c.create("INPUT",{type:"file",change:e=>{const t=new FileReader;t.onload=e=>{const t=JSON.parse(e.target.result);new S(t.template,t.cards),m.close()},t.readAsText(N.files[0])},parent:A});c.create("LABEL",{html:r("loadfile"),parent:A}),A.addEventListener("dragenter",(e=>{e.stopPropagation(),e.preventDefault(),A.dataset.drop=""}),!1),A.addEventListener("dragleave",(e=>{e.stopPropagation(),e.preventDefault(),delete A.dataset.drop}),!1),m.show({title:"Decko'cardS",className:"choice",html:L,buttons:{select:r("about")},callback:e=>{m.replay()}})}();