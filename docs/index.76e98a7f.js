function e(e){return e&&e.__esModule?e.default:e}class t{constructor(e){this.defaultLanguage=e||"en",this.setLanguage(this.defaultLanguage)}}t.prototype.setLanguage=function(e){e&&(this.language=e,this[e]||(this[e]={}))},t.prototype.set=function(e,t){this[e]||(this[e]={});for(let n in t)this[e][n]=t[n]},t.prototype.template=function(e){e&&e.getAttribute&&(e.dataset.i18n?e.innerHTML=a(e.dataset.i18n):Array.prototype.forEach.call(e.querySelectorAll("[data-i18n]"),(e=>{e.innerHTML=a(e.dataset.i18n)})))};const n=new t;function a(e,t){return n[n.language][e]||n[n.defaultLanguage][e]||(t?"":e)}var o=a;n.set("en",{title:"Title",name:"name",color:"color",borderColor:"color",rotate:"rotate",backgroundColor:"back color",backgroundSize:"size",backgroundPositionX:"position H",backgroundPositionY:"position V",ok:"OK",cancel:"Cancel"}),n.set("fr",{title:"Titre",name:"nom"}),n.setLanguage(navigator.language.split("-")[0]||"en");const r={create:function(e,t){var n;if(t=t||{},"TEXT"===e)n=document.createTextNode(t.html||""),t.parent&&t.parent.appendChild(n);else for(var a in n=document.createElement(e),/button/i.test(e)&&n.setAttribute("type","button"),t)switch(a){case"className":t.className&&t.className.trim&&n.setAttribute("class",t.className.trim());break;case"text":n.innerText=t.text;break;case"html":t.html instanceof Element?n.appendChild(t.html):void 0!==t.html&&(n.innerHTML=t.html);break;case"parent":t.parent&&t.parent.appendChild(n);break;case"options":if(/select/i.test(e))for(var o in t.options)r.create("OPTION",{html:o,value:t.options[o],parent:n});break;case"style":r.setStyle(n,t.style);break;case"change":case"click":r.addListener(n,a,t[a]);break;case"on":for(var s in t.on)r.addListener(n,s,t.on[s]);break;case"checked":n.checked=!!t.checked;break;default:n.setAttribute(a,t[a])}return n},setHTML:function(e,t){t instanceof Element?e.appendChild(t):void 0!==t&&(e.innerHTML=t)},appendText:function(e,t){e.appendChild(document.createTextNode(t||""))},addListener:function(e,t,n,a){"string"==typeof t&&(t=t.split(" ")),t.forEach((function(t){e.addEventListener(t,n,a)}))},removeListener:function(e,t,n){"string"==typeof t&&(t=t.split(" ")),t.forEach((function(t){e.removeEventListener(t,n)}))},show:function(e){e.style.display=""},hide:function(e){e.style.display="none"},hidden:function(e){return"none"===e.getStyle(e,"display")},toggle:function(e){e.style.display="none"===e.style.display?"":"none"},setStyle:function(e,t){for(var n in t)switch(n){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":"number"==typeof t[n]?e.style[n]=t[n]+"px":e.style[n]=t[n];break;default:e.style[n]=t[n]}},getStyle:function(e,t){var n,a=(e.ownerDocument||document).defaultView;if(a&&a.getComputedStyle)t=t.replace(/([A-Z])/g,"-$1").toLowerCase(),n=a.getComputedStyle(e,null).getPropertyValue(t);else if(e.currentStyle&&(t=t.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()})),n=e.currentStyle[t],/^\d+(em|pt|%|ex)?$/i.test(n)))return function(t){var n=e.style.left,a=e.runtimeStyle.left;return e.runtimeStyle.left=e.currentStyle.left,e.style.left=t||0,t=e.style.pixelLeft+"px",e.style.left=n,e.runtimeStyle.left=a,t}(n);return/px$/.test(n)?parseInt(n):n},outerHeight:function(e){return e.offsetHeight+r.getStyle(e,"marginBottom")},outerWidth:function(e){return e.offsetWidth+r.getStyle(e,"marginLeft")},offsetRect:function(e){var t=e.getBoundingClientRect();return{top:t.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:t.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:t.height||t.bottom-t.top,width:t.width||t.right-t.left}},getFixedOffset:function(e){var t={left:0,top:0},n=function(e){if(!e)return t;if("absolute"===r.getStyle(e,"position")&&"none"!==r.getStyle(e,"transform")){var a=e.getBoundingClientRect();return t.left+=a.left,t.top+=a.top,t}return n(e.offsetParent)};return n(e.offsetParent)},positionRect:function(e,t){var n=0,a=0,o=function(r){if(r)return n+=r.offsetLeft,a+=r.offsetTop,o(r.offsetParent);var s={top:e.offsetTop+a,left:e.offsetLeft+n};return t&&(s.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,s.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),s.bottom=s.top+e.offsetHeight,s.right=s.top+e.offsetWidth,s};return o(e.offsetParent)},scrollDiv:function(e,t){var n,a,o,s,l,i=!1,c=0,d=0,p="function"==typeof(t=t||{}).onmove?t.onmove:function(){},u=t.vertical?"screenY":"screenX",m=t.vertical?"scrollTop":"scrollLeft",f=!1,h=0,y=function(){l&&(h++,setTimeout(g))},g=function(){if(l){if(--h)return;var t=e.clientHeight,n=e.scrollHeight;a=t/n,l.style.height=100*a+"%",l.style.top=e.scrollTop/n*100+"%",s.style.height=t+"px",t>n-.5?s.classList.add("ol-100pc"):s.classList.remove("ol-100pc")}},v=function(t){t.target.classList.contains("ol-noscroll")||(f=!1,i=t[u],d=new Date,e.classList.add("ol-move"),t.preventDefault(),window.addEventListener("pointermove",b),r.addListener(window,["pointerup","pointercancel"],E))},b=function(t){if(!1!==i){var r=(o?-1/a:1)*(i-t[u]);f=f||Math.round(r),e[m]+=r,(n=new Date)-d&&(c=(c+r/(n-d))/2),i=t[u],d=n,r&&p(!0)}else f=!0},k=function(t){var n=t>0?Math.min(100,t/2):Math.max(-100,t/2);t-=n,e[m]+=n,-1<t&&t<1?(f?setTimeout((function(){e.classList.remove("ol-move")})):e.classList.remove("ol-move"),f=!1,p(!1)):setTimeout((function(){k(t)}),40)};if(t.vertical&&t.minibar){var L=function(n){e.removeEventListener("pointermove",L),e.parentNode.classList.add("ol-miniscroll"),l=r.create("DIV"),s=r.create("DIV",{className:"ol-scroll",html:l}),e.parentNode.insertBefore(s,e),l.addEventListener("pointerdown",(function(e){o=!0,v(e)})),t.mousewheel&&(r.addListener(s,["mousewheel","DOMMouseScroll","onmousewheel"],(function(e){T(e)})),r.addListener(l,["mousewheel","DOMMouseScroll","onmousewheel"],(function(e){T(e)}))),e.parentNode.addEventListener("pointerenter",y),window.addEventListener("resize",y),!1!==n&&y()};e.parentNode?L(!1):e.addEventListener("pointermove",L),e.addEventListener("scroll",(function(){y()}))}e.style["touch-action"]="none",e.style.overflow="hidden",e.classList.add("ol-scrolldiv"),r.addListener(e,["pointerdown"],(function(e){o=!1,v(e)})),e.addEventListener("click",(function(t){e.classList.contains("ol-move")&&(t.preventDefault(),t.stopPropagation())}),!0);var E=function(n){(d=new Date-d)>100||o?c=0:d>0&&(c=((c||0)+(i-n[u])/d)/2),k(!1===t.animate?0:200*c),i=!1,c=0,d=0,e.classList.contains("ol-move")?e.classList.remove("ol-hasClick"):(e.classList.add("ol-hasClick"),setTimeout((function(){e.classList.remove("ol-hasClick")}),500)),o=!1,window.removeEventListener("pointermove",b),r.removeListener(window,["pointerup","pointercancel"],E)},T=function(t){var n=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));return e.classList.add("ol-move"),e[m]-=30*n,e.classList.remove("ol-move"),!1};return t.mousewheel&&r.addListener(e,["mousewheel","DOMMouseScroll","onmousewheel"],T),{refresh:y}},dispatchEvent:function(e,t){var n;try{n=new CustomEvent(e)}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,{})}t.dispatchEvent(n)}};var s=r;var l=new class{constructor(e){this.element={},this.element.back=s.create("DIV",{"data-role":"dialog",parent:document.body}),this.element.form=s.create("FORM",{on:{submit:e=>{e.preventDefault()}},parent:this.element.back}),this.element.title=s.create("H2",{html:"title",parent:this.element.form}),s.create("DIV",{className:"closebox",html:"&times;",click:()=>{this.close()},parent:this.element.form}),this.element.content=s.create("DIV",{className:"content",parent:this.element.form}),this.element.buttons=s.create("DIV",{className:"buttons",parent:this.element.form}),this.close(),document.body.addEventListener("keydown",(e=>{"Escape"===e.key&&this.close()}))}close(){this.element.back.dataset.hidden=""}show(e){this.element.title.innerHTML=e.title,this.element.back.className=e.className||"",this.element.content.innerHTML="",this.element.content.appendChild(e.html),this.element.buttons.innerHTML="",Object.keys(e.buttons).forEach((t=>{s.create("BUTTON",{html:e.buttons[t],click:()=>{e.callback&&e.callback(t),this.close()},parent:this.element.buttons})})),delete this.element.back.dataset.hidden}},i=[{file:"earth-eye.svg",author:"Viglino",keywords:["earth","eye","symbol"],url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",id:"earth-eye",path:"./img/symbol/"},{file:"joker.svg",author:"Viglino",keywords:["joker","people"],url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",id:"joker",path:"./img/people/"},{file:"joker-2.svg",author:"Viglino",keywords:["joker","people"],url:"https://github.com/Viglino/decko-cards",copy:"CC-by-SA",id:"joker-2",path:"./img/people/"}];var c=function(e){const t=s.create("DIV");i.forEach((n=>{s.create("IMG",{src:n.path+n.file,click:()=>{e(n.path+n.file),l.close()},parent:t})})),l.show({title:o("images"),html:t,className:"img",buttons:{cancel:o("cancel")}})};const d={role:{html:e('<div data-prop="title"></div><div data-prop="line"></div><div data-prop="logo" class="centerX centerY"></div><div data-prop="background"></div><div data-prop="image"></div><div data-prop="foreground"></div><div data-prop="name"></div><div data-prop="info"></div>'),properties:{name:"roleTemplate",description:"roleDesc",properties:{title:{type:"text",default:"Descko &nbsp;' &nbsp; Cards",style:{color:"#000000",backgroundColor:"#cccccc"}},line:{type:"lineh",style:{color:"transparent"}},logo:{type:"image",default:"./img/none.svg",alt:["circle","box","image","hidden"],style:{backgroundSize:80,borderColor:"transparent"}},image:{type:"image",default:"./img/none.svg",style:{backgroundSize:50,backgroundPositionY:"bottom"}},background:{type:"image",style:{backgroundSize:30,backgroundPositionX:80,backgroundPositionY:100}},foreground:{type:"image",style:{backgroundSize:30,backgroundPositionX:20,backgroundPositionY:100}},name:{type:"text",default:"name",style:{color:"#000000",backgroundColor:"#cccccc",transform:{init:"translateX(-50%)",scale:1,rotate:0}}},info:{type:"textarea",default:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec at quam vel lorem suscipit sagittis non ac justo. Aenean volutpat purus vitae metus aliquam ultrices. Suspendisse rhoncus odio sit amet ex malesuada tincidunt."}}}}};for(let e in d)d[e].properties.html=d[e].html,d[e]=d[e].properties;var p=d;function u(e){return e.replace(/\n/g,"<br/>")}function m(e,t){const n=[];Object.keys(t).forEach((e=>{switch(e){case"init":n.push(t[e]);break;case"rotate":case"skewX":case"skewY":n.push(e+"("+t[e]+"deg)");break;case"scale":n.push(e+"("+t[e]+")")}})),e.style.transform=n.join(" ")}class f{constructor(e){const t=p[(e=e||{}).templates]?e.templates:"role",n=p[t];this.element=s.create("CARD",{html:n.html,parent:e.parent}),this.element.dataset.template=t,this.borderElt=s.create("DIV",{className:"border",parent:this.element}),this.properties=JSON.parse(JSON.stringify(n.properties)),this.style={},this.render()}}f.prototype.clone=function(){const e=new f;return e.properties=JSON.parse(JSON.stringify(this.properties)),e.style=JSON.parse(JSON.stringify(this.style)),e.render(),e},f.prototype.copy=function(){const e=this.element.cloneNode();return e.innerHTML=this.element.innerHTML,e},f.prototype.render=function(){this.borderElt.style.color=this.style.borderColor||"#fff",Object.keys(this.properties).forEach((e=>{const t=this.element.querySelector('[data-prop="'+e+'"]'),n=this.properties[e];switch(n.hasOwnProperty("visibility")&&(!1===n.visibility?t.style.display="none":t.style.display=""),t.dataset.type=n.type,n.type){case"text":case"emoji":case"textarea":{const e=void 0!==n.value?n.value:o(n.default)||"";t.innerHTML=u(e);break}case"image":t.style.backgroundImage="url("+(void 0!==n.value?n.value:n.default)+")";break;default:console.warn("[BADTYPE] ",n.type)}n.style&&Object.keys(n.style).forEach((e=>{switch(e){case"transform":m(t,n.style[e]);break;case"backgroundPositionX":case"backgroundPositionY":"number"==typeof n.style[e]?t.style[e]=n.style[e]+"%":t.style[e]=n.style[e];break;case"backgroundSize":t.style[e]=n.style[e]+"%";break;default:t.style[e]=n.style[e]}}))}))},f.prototype.getForm=function(e){e.innerHTML="";const t=s.create("FIELDSET",{html:"<legend>Style</legend>",parent:e});s.create("LABEL",{html:o("borderColor"),parent:t}),s.create("INPUT",{type:"color",value:this.style.borderColor||"#ffffff",change:e=>{this.style.borderColor=e.target.value||"#ffffff",this.borderElt.style.color=this.style.borderColor||"#fff"},parent:t}),Object.keys(this.properties).forEach((t=>{const n=this.properties[t],a=s.create("FIELDSET",{html:"<legend>"+t+"</legend>","data-type":n.type,parent:e}),r=this.element.querySelector('[data-prop="'+t+'"]');if(n.hasOwnProperty("visibility")){const e=s.create("LABEL",{className:"visibility",parent:a});s.create("INPUT",{type:"checkbox",checked:!1!==n.visibility,change:e=>{n.visibility=e.target.checked,e.target.checked?r.style.display="":r.style.display="none"},parent:e}),s.create("SPAN",{parent:e})}switch(n.type){case"text":case"textarea":s.create("textarea"===n.type?"TEXTAREA":"INPUT",{value:n.value||"",type:"text",on:{keyup:e=>{n.value=e.target.value;const t=u(e.target.value);r.innerHTML=t}},parent:a});break;case"image":{s.create("BUTTON",{className:"image",click:()=>{c((t=>{e.value=t,e.dispatchEvent(new Event("change"))}))},parent:a});const e=s.create("INPUT",{type:"url",className:"image",value:n.value||"",change:e=>{n.value=e.target.value,r.style.backgroundImage="url("+n.value+")"},parent:a});break}}if(n.alt){const e=s.create("SELECT",{className:"alt",change:()=>{n.altVal=r.dataset.alt=e.value},parent:a});n.alt.forEach((t=>{const a=s.create("OPTION",{value:t,html:t,parent:e});n.altVal===t&&(a.selected=!0)}))}const l=Object.keys(n.style||{});if(l.length){const e=s.create("FIELDSET",{html:"<legend>Style</legend>",parent:a});l.forEach((t=>{const a="transform"!==t?s.create("LABEL",{html:o(t),parent:e}):null;switch(t){case"color":case"borderColor":case"backgroundColor":s.create("INPUT",{type:"color",value:n.style[t],change:e=>{r.style[t]=n.style[t]=e.target.value},parent:a});break;case"backgroundSize":s.create("INPUT",{type:"range",className:"size",min:20,max:200,step:1,value:n.style[t],on:{input:e=>{n.style[t]=e.target.value,r.style[t]=n.style[t]+"%"}},parent:a});break;case"backgroundPositionX":case"backgroundPositionY":if("number"==typeof n.style[t])s.create("INPUT",{type:"range",className:"size",min:-100,max:200,step:1,value:n.style[t],on:{input:e=>{n.style[t]=e.target.value,r.style[t]=n.style[t]+"%"}},parent:a});else{const e=s.create("SELECT",{change:e=>{r.style[t]=n.style[t]=e.target.value},parent:a});("backgroundPositionX"===t?["left","center","right"]:["top","center","bottom"]).forEach((a=>{const r=s.create("OPTION",{value:a,html:o(a),parent:e});n.style[t]===a&&(r.selected="selected")}))}break;case"transform":Object.keys(n.style.transform).forEach((t=>{const a=s.create("LABEL",{html:o(t),parent:e});switch(t){case"scale":{const e=s.create("INPUT",{type:"range",min:.5,max:3,step:.1,value:n.style.transform[t],on:{input:e=>{n.style.transform[t]=e.target.value,m(r,n.style.transform)}},parent:a});s.create("BUTTON",{html:"↻",className:"reset",click:()=>{e.value=1,e.dispatchEvent(new Event("input"))},parent:a});break}case"skewY":case"rotate":{const e=s.create("INPUT",{type:"range",className:"angle",min:-10,max:10,step:.1,value:-1*n.style.transform[t],on:{input:e=>{n.style.transform[t]=-1*e.target.value,m(r,n.style.transform)}},parent:a});s.create("BUTTON",{html:"↻",className:"reset",click:()=>{e.value=0,e.dispatchEvent(new Event("input"))},parent:a});break}default:a.style.display="none"}}))}}))}}))};var h=f;const y=[];let g;const v=document.getElementById("cards");s.create("BUTTON",{html:"+",click:()=>{k()},parent:v});const b=s.create("UL",{parent:v});function k(e){e=e?e.clone():new h({template:"role"});const t={li:s.create("LI",{html:e.copy(),click:()=>{L(t)},parent:b}),card:e};y.push(t),L(t)}function L(e){g&&(g.li.innerHTML="",g.li.appendChild(g.card.copy()),y.forEach((e=>delete e.li.dataset.select))),document.getElementById("card").innerHTML="",document.getElementById("form").innerHTML="",g=e,g&&(e.li.dataset.select="",document.getElementById("card").appendChild(e.card.element),s.create("BUTTON",{html:o("duplicate"),className:"duplicate",click:()=>{k(g.card)},parent:document.getElementById("card")}),s.create("BUTTON",{html:o("delete"),className:"delete",click:()=>{!function(e){const t=y.indexOf(e);y.splice(t,1),e.li.remove(),L(y[t-1]||y[t])}(g)},parent:document.getElementById("card")}),e.card.getForm(document.getElementById("form")))}k();